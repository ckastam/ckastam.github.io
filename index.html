<!DOCTYPE html>
            <html>
              <head>
                <meta charset="utf-8">
                <meta name="viewport" content="width=device-width">
                <link href="style.css" rel="stylesheet" type="text/css" />
              </head>
              <body>
			  <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
			   <script>
		      function googleTranslateElementInit() {
              new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL}, 'google_translate_element');
           }
              navigator.geolocation.getCurrentPosition(function(position) {

                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    const altitude = position.coords.altitude;
                    const accuracy = position.coords.accuracy;
                    const altitudeAccuracy = position.coords.altitudeAccuracy;
                    const heading = position.coords.height;
                    const speed = position.coords.speed;
                    const timestamp = position.timestamp;

                    // work with this information however you'd like!
                });
              function locationSuccess(position) {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    const altitude = position.coords.altitude;
                    const accuracy = position.coords.accuracy;
                    const altitudeAccuracy = position.coords.altitudeAccuracy;
                    const heading = position.coords.height;
                    const speed = position.coords.speed;
                    const timestamp = position.timestamp;
                    getweather(latitude, longitude);
                    // work with this information however you'd like!
                }

                function locationError(error) {
                    const code = error.code;
                    const message = error.message;
                    // read the code and message and decide how you want to handle this!
                    document.getElementById('result').innerHTML = message;
                }

                navigator.geolocation.getCurrentPosition(locationSuccess, locationError);
            function getweather(latitude, longitude){
            const key = "b6d519e586c07037125dafb81f9e3fa3";
            const link = "https://api.openweathermap.org/data/2.5/weather?lat="+latitude+"&lon="+longitude+"&units=metric&apikey="+key+"&lang="+localStorage.lang;
            let request = new XMLHttpRequest();
            request.open('GET', link);
            request.responseType = 'json';
            request.send();
            request.onload = function() {
              const data = request.response;
              showweather(data)
            }};
            function showweather(obj) {
              	var date = new Date(obj.dt * 1000);
	     // Hours part from the timestamp
            var hours = date.getHours();
            // Minutes part from the timestamp
            var minutes = "0" + date.getMinutes();
            // Seconds part from the timestamp
            var seconds = "0" + date.getSeconds();
            var formattedTime = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);

              const weather = obj['weather'];
              var mt = obj.main.temp_min;
              for (let i = 0; i < weather.length; i++) {
                var icon = weather[i].icon;
                document.getElementById("temp").innerHTML = obj.main.temp +"°C";
 		
		document.getElementById("humidity").innerHTML = obj.main.humidity+"%";
                document.getElementById("description").innerHTML = weather[i].description;
                iconshow(icon,mt)
                document.getElementById("mintemp").innerHTML = mt+"°C";
                document.getElementById("maxtemp").innerHTML = obj.main.temp_max+"°C";
                document.getElementById("wspdg").innerHTML = obj.wind.speed+"MPH | "+obj.wind.deg+"°";
                document.getElementById("pressure").innerHTML = obj.main.pressure +" hPa";
		document.getElementById("clouds").innerHTML = obj.clouds.all +" %";
                document.getElementById("city").innerHTML = obj.name;
		document.getElementById("date").innerHTML = date;
		var tempf = obj.main.temp*1.8+32;
		document.getElementById("tempf").innerHTML = tempf.toFixed(2)+"°F";
		
		
		 }
            };
            function iconshow(icon, mt) {
                        var img = new Image();
                        img.src = 
            'https://openweathermap.org/img/wn/'+icon+'@2x.png';
                        img.style.width = "40px";
                        img.style.height = "40px";
                        document.getElementById('icon').appendChild(img);
                        if (mt>=20){
                          document.getElementById("result").innerHTML="It's gonna be hot today. Bring some water wherever you go outside.";
                          chrome.notifications.create('hotoutside', {
                          type: 'basic',
                          iconUrl: 'images/1.png',
                          title: 'Test Message',
                          message: 'You are awesome!',
                          priority: 2
                          });
                        }else if(mt<=15){
                          document.getElementById("result").innerHTML="It's going to be chilly today. Wear some warm clothes.";
                        }

            };  </script>
			   <style>
table, tr, th, td {
  border: 5px solid black;
  border-collapse: collapse;
}
</style>
			  <div id="body" style="font-size: 40px;">
                <table width=1300px align=center>
                <thead	align=center>
					<th>City</th>
					<th>Temperature oC</th>
					<th>Temperature oF</th>
					<th>Humidity</th>
					<th>Description</th>
					<th>Icon</th>
				</thead>
				<tbody align=center>
				<tr>
					<td id="city"></td>
                    <td id="temp"></td>
					<td id="tempf"></td>
                    <td id="humidity"></td>
                    <td id="description"></td>
                    <td id="icon" align=center style="background-color: cyan;"></td>
                </tr>
				</tbody>  
                </table>
                <table width=1300px align=center>
                  <thead align=center>
                    <th>Min Temp</th>
                    <th>Max Temp</th>
                    <th>Windspeed | Degrees</th>
                    <th>Pressure</th>
					<th>Clouds</th>
				  </thead>
                  <tbody align=center>
				  <tr>
                    <td id="mintemp"></td>
                    <td id="maxtemp"></td>
                    <td id="wspdg"></td>  
                    <td id="pressure"></td>
					<td id="clouds"></td>
                    </tr>
					</tbody></table>
					<table width=1300px align=center>
				<tbody align=center><tr>
					<td id="date"></td>
					<td id="result"></td>
					</tr>
					</tbody>
				</table>
				</br>
				<table width=1300px align=center>
				<tr>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="1" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="1027" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="1839" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="131" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="2" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>				
				</tr>
				<tr>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="74" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="1958" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="6636" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="5426" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="52" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				</tr>
				<tr>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="1698" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="1437" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="9119" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="7186" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="8104" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				</tr>
				<tr>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="3635" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				<td><script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/currency.js"></script><div class="coinmarketcap-currency-widget" data-currencyid="8916" data-base="USD" data-secondary="" data-ticker="true" data-rank="true" data-marketcap="true" data-volume="true" data-statsticker="true" data-stats="USD"></div></td>
				</tr>
                </table>
				</center>
                </div>
               
			</body>
            </html>  
